<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Debate Arena Stable</title>
<style>
body{
background:#0d1117;
color:#58ffb3;
font-family:monospace;
padding:15px;
}
h1{color:#8affd1;}
.panel{
border:1px solid #58ffb3;
padding:10px;
margin-top:10px;
border-radius:6px;
}
button{
background:#00261c;
color:#58ffb3;
border:1px solid #58ffb3;
padding:6px;
margin-top:5px;
width:100%;
}
input{
width:100%;
padding:6px;
background:#001a12;
color:#58ffb3;
border:1px solid #58ffb3;
}
.log{
font-size:13px;
opacity:0.9;
}
</style>
</head>
<body>

<h1>âš” DEBATE ARENA âš”</h1>

<div class="panel">
<b>ğŸ“œ ãƒ«ãƒ¼ãƒ«</b><br>
ãƒ»ãƒ†ãƒ¼ãƒã«å¯¾ã—ã¦è‡ªç”±ã«è­°è«–ã™ã‚‹<br>
ãƒ»è«–ç†æ€§ã§AIã®HPã‚’å‰Šã‚‹<br>
ãƒ»æ”¯æŒç‡ã‚‚å‹æ•—ã«å½±éŸ¿<br>
ãƒ»HPã‹æ”¯æŒç‡ãŒ0ã§æ•—åŒ—
</div>

<div class="panel">
é›£æ˜“åº¦:
<select id="difficulty">
<option value="1">Easy</option>
<option value="2">Normal</option>
<option value="3">Hard</option>
</select>
</div>

<div class="panel">
<b>ğŸ­ AIã‚­ãƒ£ãƒ©:</b> <span id="aiName"></span>
</div>

<div class="panel">
<b>ğŸ“ ãƒ†ãƒ¼ãƒ:</b> <span id="topic"></span>
</div>

<div class="panel">
ã‚ãªãŸHP: <span id="playerHP">100</span> |
AI HP: <span id="aiHP">100</span><br>
ã‚ãªãŸæ”¯æŒç‡: <span id="playerPop">50</span>% |
AIæ”¯æŒç‡: <span id="aiPop">50</span>%
</div>

<div class="panel">
<input id="input" placeholder="æ„è¦‹ã‚’å…¥åŠ›...">
<button onclick="nextTurn()">ç™ºè¨€</button>
</div>

<div class="panel log" id="log"></div>

<script>
const topics=[
"AIã¯äººé¡ã«å¿…è¦ã‹ï¼Ÿ",
"å®¿é¡Œã¯å»ƒæ­¢ã™ã¹ãã‹ï¼Ÿ",
"SNSã¯è¦åˆ¶ã™ã¹ãã‹ï¼Ÿ",
"ã‚²ãƒ¼ãƒ ã¯æ•™è‚²ã«å½¹ç«‹ã¤ã‹ï¼Ÿ"
];

const aiCharacters=[
"å†·é™ãªè«–ç†å­¦è€…",
"ãƒ‡ãƒ¼ã‚¿è‡³ä¸Šä¸»ç¾©ã®æ•™æˆ",
"æ„Ÿæƒ…æ´¾ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼",
"çš®è‚‰å±‹ã®å“²å­¦è€…"
];

let topic=topics[Math.floor(Math.random()*topics.length)];
let aiName=aiCharacters[Math.floor(Math.random()*aiCharacters.length)];

document.getElementById("topic").innerText=topic;
document.getElementById("aiName").innerText=aiName;

let playerHP=100;
let aiHP=100;
let playerPop=50;
let aiPop=50;
let history=[];
let baseStance=null;

function analyze(text){
let score=0;
if(text.length>25) score+=15;
if(/ãªãœ|ç†ç”±|ã ã‹ã‚‰|ã—ã‹ã—|ä¸€æ–¹/.test(text)) score+=15;
if(/ä¾‹ãˆã°|å…·ä½“/.test(text)) score+=15;
if(/ãƒ‡ãƒ¼ã‚¿|çµ±è¨ˆ|æ ¹æ‹ /.test(text)) score+=20;
return score;
}

function detectStance(text){
if(/å¿…è¦|è³›æˆ|è‰¯ã„/.test(text)) return "pro";
if(/ä¸è¦|åå¯¾|æ‚ªã„/.test(text)) return "con";
return null;
}

function aiReply(score,diff){
let dmg=15+Math.random()*10;
if(diff==2) dmg+=10;
if(diff==3) dmg+=20;

let line="";
if(aiName=="å†·é™ãªè«–ç†å­¦è€…") line="è«–ç†ãŒç”˜ã„ã€‚å®šç¾©ã‚’æ˜ç¢ºã«ã€‚";
if(aiName=="ãƒ‡ãƒ¼ã‚¿è‡³ä¸Šä¸»ç¾©ã®æ•™æˆ") line="çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã¯ã‚ã‚‹ã®ã‹ã­ï¼Ÿ";
if(aiName=="æ„Ÿæƒ…æ´¾ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼") line="ãã‚Œã£ã¦å…±æ„Ÿã§ãã‚‹ï¼Ÿ";
if(aiName=="çš®è‚‰å±‹ã®å“²å­¦è€…") line="å‰æè‡ªä½“ãŒå¹»æƒ³ã‹ã‚‚ã­ã€‚";

return {damage:Math.floor(dmg),text:line};
}

function randomEvent(){
if(Math.random()<0.25){
let events=[
"ğŸ”¥ç‚ä¸Šï¼ã‚ãªãŸæ”¯æŒç‡-10",
"ğŸ“ºãƒ¡ãƒ‡ã‚£ã‚¢å¥½æ„ï¼AIæ”¯æŒç‡-10",
"âš¡è«–ç‚¹è¿·å­ï¼åŒæ–¹HP-5"
];
let e=events[Math.floor(Math.random()*events.length)];
if(e.includes("ã‚ãªãŸæ”¯æŒç‡-10")) playerPop-=10;
if(e.includes("AIæ”¯æŒç‡-10")) aiPop-=10;
if(e.includes("åŒæ–¹")){playerHP-=5;aiHP-=5;}
return e;
}
return "";
}

function nextTurn(){
let text=document.getElementById("input").value;
if(!text) return;

history.push(text);

if(!baseStance) baseStance=detectStance(text);
else{
let now=detectStance(text);
if(now && now!==baseStance){
playerHP-=15;
}
}

let diff=document.getElementById("difficulty").value;
let playerDamage=analyze(text);
aiHP-=playerDamage;

let ai=aiReply(playerDamage,diff);
playerHP-=ai.damage;

if(playerDamage>0) playerPop+=3;
else playerPop-=3;

aiPop=100-playerPop;

let event=randomEvent();

document.getElementById("log").innerHTML=
"ã‚ãªãŸã®æ”»æ’ƒï¼š"+playerDamage+"ãƒ€ãƒ¡ãƒ¼ã‚¸<br>"+
aiName+"ã®åè«–ï¼š"+ai.text+"<br>"+
"ã‚ãªãŸã¯"+ai.damage+"ãƒ€ãƒ¡ãƒ¼ã‚¸å—ã‘ãŸ<br>"+
(event?event+"<br>":"");

document.getElementById("playerHP").innerText=playerHP;
document.getElementById("aiHP").innerText=aiHP;
document.getElementById("playerPop").innerText=playerPop;
document.getElementById("aiPop").innerText=aiPop;

document.getElementById("input").value="";

if(playerHP<=0||playerPop<=0){
alert("ğŸ’€æ•—åŒ—...");
location.reload();
}
if(aiHP<=0||aiPop<=0){
alert("ğŸ‰å‹åˆ©ï¼");
location.reload();
}
}
</script>

</body>
</html>