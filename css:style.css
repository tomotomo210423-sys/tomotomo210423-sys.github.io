:root{
  --bg:#06060a;
  --panel-bg: rgba(255,255,255,0.03);
  --accent:#ffd166;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:#eee;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Hiragino Kaku Gothic ProN",Meiryo,'Noto Sans JP'; -webkit-user-select:none; user-select:none;}
canvas{display:block; width:100%; height:100%; touch-action:none; -ms-touch-action:none;}
#portraitOverlay{
  position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:120; background:#000; color:#fff; font-size:20px;
}
#startScreen{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:110; background:linear-gradient(180deg, rgba(0,0,0,0.7), rgba(0,0,0,0.9));}
.panel{width:92%; max-width:680px; background:var(--panel-bg); padding:18px; border-radius:12px; border:1px solid rgba(255,255,255,0.06); text-align:center;}
.roleBtn{width:32%; padding:12px; margin:6px; border-radius:8px; border:1px solid rgba(255,255,255,0.06); background:transparent; color:#fff; cursor:pointer;}
.roleBtn.selected{box-shadow:0 0 0 3px rgba(255,209,102,0.08); border-color:var(--accent); background:rgba(255,209,102,0.04);}
.startBtn{padding:10px 18px; font-weight:700; border-radius:8px; border:none; background:var(--accent); color:#111; cursor:pointer;}
.note{font-size:13px;color:#bbb;margin-top:10px}
#hud{position:fixed; inset:0; pointer-events:none; z-index:100}
#stickBase{position:absolute; left:18px; bottom:18px; width:120px; height:120px; border-radius:60px; background:rgba(255,255,255,0.02); pointer-events:auto; display:flex; align-items:center; justify-content:center;}
#stickKnob{width:56px; height:56px; border-radius:28px; background:rgba(255,255,255,0.95); transform:translate(0,0); transition:0.05s linear;}
#actionBtn{position:absolute; right:18px; bottom:18px; width:88px; height:88px; border-radius:44px; background:rgba(255,255,255,0.03); display:flex; align-items:center; justify-content:center; font-weight:800; pointer-events:auto; cursor:pointer;}
#infoBar{position:absolute; left:12px; top:12px; font-size:14px; color:#ddd; pointer-events:none;}
/* puzzle overlay */
#puzzleOverlay{position:fixed; inset:0; background:rgba(0,0,0,0.8); z-index:200; display:flex; align-items:center; justify-content:center; color:#fff; pointer-events:auto;}
.smallBtn{padding:8px 12px; border-radius:8px; border:none; background:var(--accent); color:#111; font-weight:700; cursor:pointer;}